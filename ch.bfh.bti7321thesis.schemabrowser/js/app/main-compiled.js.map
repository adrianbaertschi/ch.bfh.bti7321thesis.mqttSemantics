{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["\nvar schemas = {};\nvar subscriptions = {};\n\nvar client = new Paho.MQTT.Client(host, port, '/', 'descBrowser');\nclient.onMessageArrived = onMessage;\nclient.onconnectionlost = onDisconnect;\nfunction onConnect() {\n    client.subscribe('+/+/+/+/+/schema/YAML', onMessage);\n    console.log(\"MQTT connected\");\n}\n\nclient.connect({onSuccess: onConnect});\n\nfunction onMessage(message) {\n//        console.log(message.destinationName + \" - \" + message.payloadString);\n    var topics = message.destinationName.split(\"/\");\n\n    var fulltopic = message.destinationName;\n\n    var baseInfo = topics[0] + ' - ' + topics[1] + ' - ' + topics[2] + ' - ';\n    console.log(baseInfo);\n    var deviceType = topics[3];\n    var devId = topics[4];\n\n\n    if(fulltopic in schemas) {\n        schemas[fulltopic] = message.payloadString;\n        return;\n    }\n    schemas[fulltopic] = message.payloadString;\n\n    var a = '<a href=\"#\" onclick=\"deviceClick(\\'' + fulltopic + '\\')\">'+ topics[4] + '</a>';\n\n\n    var row = '<tr>' +\n        '<td>'+ topics[0] + '</td>'+\n        '<td>'+ topics[1] + '</td>'+\n        '<td>'+ topics[2] + '</td>'+\n        '<td>'+ topics[3] + '</td>'+\n        '<td>' + a + '</td></tr>';\n\n    $('#deviceTable > tbody:last-child').append(row);\n\n\n\n}\n\nfunction deviceClick(schemaTopic) {\n    console.log('table click');\n    console.log(schemaTopic);\n    var devId = schemaTopic.split('/')[4];\n\n\n    var deviceTopic = schemaTopic.split('/').slice(0, 5).join('/');\n    console.log(deviceTopic);\n\n    $('#txt').val(schemas[schemaTopic]);\n\n    var json = jsyaml.load(schemas[schemaTopic]);\n\n    // use this if Schema ist in JSON\n    // var json = JSON.parse(schemas[this.id]);\n\n    $('#doc').text('');\n\n    // TODO: meta infos (version , etc).\n    //$('#commands').text(json.id).append(' - ').append(json.version);\n\n    var stateCnt = '';\n    json.stateDescription.states.forEach(function (state) {\n        stateCnt += renderState(state, deviceTopic);\n    });\n    $('#doc').append(createSection('State', stateCnt));\n\n    var eventCnt = '';\n    json.eventDescription.events.forEach(function (event) {\n        eventCnt += renderEvent(event, deviceTopic);\n    });\n    $('#doc').append(createSection('Events', eventCnt));\n\n    var cmdCnt = '';\n    json.commandDescription.commands.forEach(function (cmd) {\n        cmdCnt += renderCmd(cmd, deviceTopic);\n    });\n    $('#doc').append(createSection('Commands', cmdCnt));\n\n    var typeCnt = '';\n    json.complexTypes.forEach(function (type) {\n        typeCnt += renderType(type, deviceTopic);\n    });\n    $('#doc').append(createSection('Complex_Types', typeCnt));\n\n\n    evtHandler();\n\n}\n\nfunction createSection(title, content) {\n    var res = '';\n    res += '<div class=\"panel panel-default\" id=\"panel1\">';\n\n    res += '  <div class=\"panel-heading\">';\n    res += '    <h2 class=\"panel-title\">';\n    res += '      <a data-toggle=\"collapse\" data-target=\"#collapse'+title+'\" href=\"#collapse'+ title + '\">';\n    res +=          title;\n    res += '      </a>';\n    res += '    </h2>';\n    res += '  </div>';\n\n    res += '  <div id=\"collapse'+title+'\" class=\"panel-collapse collapse in\">';\n    res += '    <div class=\"panel-body\">';\n    res +=          content;\n    res += '    </div>';\n\n    res += '</div>';\n\n    return res;\n}\n\nfunction renderState(state, deviceTopic) {\n    var res = '<strong>' + state.name + '</strong> <br>';\n\n    if(state.description) {\n        res += state.description + '<br>';\n    }\n\n\n//        console.log(state.range);\n    if (state.range && state.range.hasOwnProperty('type')) {\n        res += renderRange(state.range, 'Value:');\n    } else if (state.options && state.options.hasOwnProperty('values')) {\n        res += renderPresets(state.options);\n    } else if(state.complexTypeRef !== null) {\n        // Ref to Complextype\n        res += renderComplexTypeLink(state.complexTypeRef) + '<br>';\n    } else {\n        console.log('ERROR ' + state);\n    }\n\n    // Topic\n    var stateTopic =  deviceTopic + '/state/' + state.name;\n    res += renderTopic(stateTopic);\n\n    return res + '<br>';\n}\n\nfunction renderComplexTypeLink(typeRef) {\n    var res = '';\n\n    res += 'Type: ';\n    res += '<a href=\"#type_' + typeRef + '\">' + typeRef + '</a> <br>';\n\n    return res;\n}\n\n\nfunction renderCmd(cmd, deviceTopic) {\n    var cmdTopic = deviceTopic + '/commands/' + cmd.name;\n\n    var res = '<strong>' + cmd.name + '</strong> <br>';\n\n    res += 'Linked state: ' + cmd.linkedState + '<br>';\n\n//        console.log(cmd.parameter);\n\n\n    $.each(cmd.parameter, function (key, value) {\n        //console.log(value);\n        res += 'Parameter: ' + key + '<br>';\n        console.log(value);\n        console.log(cmd.parameters);\n\n        //console.log(value);\n        if (value.hasOwnProperty('min')) {\n            res += renderRange(value, 'Expects:');\n        } else if (value.hasOwnProperty('values')) {\n            res += renderPresets(value);\n        } else if(typeof value === 'string') {\n            // Ref to Complextype\n            res += renderComplexTypeLink(value) + '<br>';\n        } else {\n            console.log('ERROR ' + value);\n        }\n\n        res += renderTopic(cmdTopic);\n\n        var cmdId = $.md5(cmdTopic);\n\n        res += '<form class=\"form-inline\">';\n        res += '    <div class=\"form-group\">';\n        res += '        <textarea id=\"' + cmdId + '\" rows=\"2\" cols=\"20\" style=\"font-family:monospace;\" class=\"form-control\" ></textarea>';\n        res += '        <button data-id=\"' + cmdTopic + '\" data-topic=\"' + cmdTopic + '\" class=\"btn btn-default cmd\" type=\"button\">Send</button>';\n        res += '    </div>';\n        res += '</form>';\n    });\n\n    return res + '<br>';\n}\n\nfunction renderEvent(event, deviceTopic) {\n    var eventName = event.name;\n    var eventTopic = deviceTopic + '/events/' + event.name;\n    var evtId = $.md5(eventTopic);\n\n    var res = '<strong>' + eventName + '</strong> <br>';\n    res += event.description + '<br>';\n\n\n//        res += renderRange(event.range, 'Value:');\n    if (event.range && event.range.hasOwnProperty('type')) {\n        res += renderRange(event.range, 'Value:');\n    } else if (event.options && event.options.hasOwnProperty('values')) {\n        res += renderPresets(event.options);\n    } else if(event.complexTypeRef !== null) {\n        // Ref to Complextype\n        res += renderComplexTypeLink(event.complexTypeRef) + '<br>';\n    } else {\n        console.log('ERROR ' + event);\n    }\n\n    res += renderTopic(eventTopic)+ '<br>';\n    res += '<form class=\"form-inline\">';\n    res += '    <div class=\"form-group\">';\n    res += '        <button data-topic=\"' + eventTopic + '\" class=\"btn btn-default evt\" type=\"button\">Subscribe</button>';\n    res += '        <input id=\"' + evtId + '\"type=\"text\" class=\"form-control\">';\n    res += '    </div>';\n    res += '</form>';\n\n    return res +'<br>';\n}\n\nfunction renderType(type, deviceTopic) {\n    var res = '<strong> <p id=\"type_'+ type.name +'\">' + type.name + '</p></strong>';\n\n    res += 'Properties:' + '<br>';\n    res += '<ul>';\n    $.each(type.properties, function (index, value) {\n        res += '<li>' + value.name + ': ' + value.type  + '</li>';\n        res += '</li>'\n\n    });\n    res += '</ul>';\n\n    return res;\n}\n\nfunction renderTopic(topic) {\n    var res = ' <div class=\"input-group\">';\n    res += '         <span class=\"input-group-addon\" id=\"basic-addon3\">Topic</span> ';\n    res += '        <input class=\"form-control\" id=\"disabledInput\" type=\"text\" value=\"'+topic+'\" readonly>';\n    res += '    </div>';\n    return res;\n}\n\nfunction renderPresets(presets) {\n    var res = '';\n    $.each(presets, function (index, value) {\n        res += value + ' ';\n    });\n\n    return res + '<br>';\n}\n\nfunction renderRange(range, label) {\n\n    if (range == null) {\n        return '';\n    }\n    var res = label;\n    res += '<ul>';\n    res += '<li>Type: ' + range.type + '</li>';\n//        console.log(range.min);\n    if(range.min !== '' && !isNaN(range.min)) {\n        res += '<li>Min: ' + range.min + '</li>';\n    }\n    if(range.max !== '' && !isNaN(range.max)) {\n        res += '<li>Max: ' + range.max + '</li>';\n    }\n\n    res += '</ul>';\n    return res;\n}\n\nfunction onDisconnect(reason) {\n    console.log(\"disconnected - \" + reason);\n    alert(\"disconnected - \" + reason);\n}\n\nfunction evtHandler() {\n    $('.evt').click(function () {\n        //var eventId = $(this).data('id');\n        var eventTopic = $(this).data('topic');\n\n        var sub;\n        if (!(eventTopic in subscriptions)) {\n            sub = new Subscription();\n            subscriptions[eventTopic] = sub;\n        } else {\n            sub = subscriptions[eventTopic];\n        }\n\n        // TODO: topic übergeben\n\n\n        //console.log($(this).text());\n        $(this).toggleClass(\"active\");\n        if ($(this).text() === 'Subscribe') {\n            sub.subscribe(eventTopic);\n            $(this).text('Unsubscribe');\n        } else {\n            $(this).text('Subscribe');\n            sub.unsubscribe(eventTopic);\n        }\n\n\n    });\n\n    $('.cmd').click(function () {\n\n        var cmdTopic = $(this).data('topic');\n\n        var value = $('#'+ $.md5(cmdTopic)).val();\n        console.log(value);\n        console.log(cmdTopic);\n\n        var pub = new Publisher();\n        pub.publish(value, cmdTopic);\n    });\n\n//        $('#collapseComplex_Types').addClass('in');\n}\n"]}